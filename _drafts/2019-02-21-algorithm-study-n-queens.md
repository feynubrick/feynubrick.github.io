---
layout: post
title: "알고리즘 공부 // N-Queens"
comments: true
author: feynubrick
date: 2019-02-21
tags: [JavaScript, Algorithm, Study, CodeStates]
---

# N-Queens 문제

N X N 체스판이 주어지고, 여기에 서로 공격하지 않도록 N개의 퀸을 놓을 수 있는 모든 경우의 수를 찾는 문제다.

## Queen의 공격방법

체스를 해본 사람이라면 상식이지만, 체스에서 퀸(Queen)은 가장 강력한 말이다.
왜냐하면 가로, 세로, 대각선 모두 공격이 가능하기 때문이다.
그러니까 가로 한 줄, 세로 한 줄을 공격할 수 있는 룩(Rook)과
대각선으로 공격할 수 있는 비숍(Bishop)이 합쳐진 능력을 갖는 '사기캐'다.

## 문제 파악

가로 4칸, 세로 4칸(4 X 4)의 체스판을 생각해보자.

<figure>
  <img src="/assets/nqueens-4by4-chessboard.png" alt="stack"/>
  <figcaption>가로 4칸, 세로 4칸(4 X 4)의 체스판에 Queen이 4개 올라간 모습.
  체스판에 배치된 퀸이 모두 서로를 공격하지 못하는 위치에 배치되어 있다.
  이 배치는 4 X 4에서 가능한 배치 2개 중 하나다.</figcaption>
</figure>

이 문제는 위의 배치처럼 총 4개의 퀸을 서로 공격하지 못하게 배치할 수 있는 모든 경우를 찾는 문제다.

그럼 어떻게 문제를 해결할 수 있을까?

# 풀이 전략

## 결정 트리(Decision Tree)

맨 윗줄의 한 칸에 퀸을 하나 놓았다고 생각하면,
그 다음 말을 놓을 수 있는 곳은 지금 놓은 위치를 제외한 모든 경우다.
하지만, 퀸이 공격할 수 있는 위치는 제외해야한다.
이런 식으로 하나씩 결정을 할 때마다 다음 결정을 할 때 고려해야할 옵션을 트리구조로 표현한 것을 결정 트리(decision tree)라고 한다.

여기서는 다음에 말을 놓을 수 있는 위치를 결정하는 과정을 트리구조로 추상화해서 문제에 접근해보려고 한다.

```
Q - - -
- - - -
- - - -
- - - -
```

먼저 위와 같이 처음 Q을 놓는다.
그 다음에 놓을 수 있는 위치는 다음의 6개의 위치다.

```
Q - - -
- - C C
- C - C
- C C -
```

이 중 하나에 Q을 놓게되면, 결정 트리에서 선택할 수 있는 옵션이 다음과 같이 변하게 된다.

```
Q - - -
- - Q -
- - - -
- C - -
```

그러니까 매 결정, 즉 말을 놓을 때마다 결정 구조의 선택할 수 있는 옵션이 달라지게 되어, 모든 옵션을 탐색하는 것이 

## 백 트랙(back track)
